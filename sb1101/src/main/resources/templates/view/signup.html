<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>

    body {
      background-color: #121212;
      color: white;
    }
    .signup-container {
      max-width: 600px;
      margin: 50px auto;
      padding: 30px;
      background-color: rgba(0, 0, 0, 0.7);
      border-radius: 10px;
    }
    .form-control {
      background-color: #333;
      color: white;
      border: 1px solid #444;
    }
    .form-control:focus {
      background-color: #444;
      color: #acd671;
      border-color: #555;
    }
    .btn-custom {
      background-color: #007bff;
      color: white;
    }
    .btn-custom:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

<!-- 헤더 포함 -->
<div th:replace="layout/header :: header"></div>

<!-- 회원가입 폼 -->
<div class="signup-container">
  <h2 class="text-center mb-4">회원가입</h2>
  <form action="#" th:action="@{/signup}" method="POST" id="signup-form">
    <!-- 사용자 이름 -->
    <div class="form-group">
      <label for="username">사용자 이름</label>
      <input type="text" class="form-control" id="username" name="username" required placeholder="사용자 이름을 입력하세요" th:value="${sign.username}">
    </div>

    <!-- 이메일 -->
    <div class="form-group">
      <label for="email">이메일 주소</label>
      <input type="email" class="form-control" id="email" name="email" required placeholder="이메일을 입력하세요" th:value="${sign.email}">
    </div>

    <!-- 비밀번호 -->
    <div class="form-group">
      <label for="password">비밀번호</label>
      <input type="password" class="form-control" id="password" name="password" required placeholder="비밀번호를 입력하세요">
    </div>

    <!-- 비밀번호 확인 -->
    <div class="form-group">
      <label for="confirmPassword">비밀번호 확인</label>
      <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required placeholder="비밀번호를 다시 입력하세요">
    </div>

    <!-- 소속 선택 -->
    <div class="form-group">
      <label for="department">소속</label>
      <select class="form-control" id="department" name="department">
        <option value="엘도라르 숲" th:selected="${sign.department == 'EF'}">엘도라르 숲</option>
        <option value="로이셰르 왕국" th:selected="${sign.department == 'RK'}">로이셰르 왕국</option>
        <option value="크래스탄 산맥" th:selected="${sign.department == 'KM'}">크래스탄 산맥</option>
      </select>
    </div>

    <!-- 가입 버튼 -->
    <button type="submit" class="btn btn-custom btn-block">회원가입</button>
  </form>

  <div class="text-center mt-3">
    <p>이미 계정이 있으신가요? <a href="/login" class="text-info">로그인</a></p>
  </div>

  <!-- 오류 메시지 표시 -->
  <div th:if="${error}" class="alert alert-danger text-center mt-3">
    <span th:text="${error}"></span>
  </div>
</div>

<!-- 스크립트 -->
<script>
  // 비밀번호 확인 체크
  document.getElementById('signup-form').addEventListener('submit', function (event) {
    var password = document.getElementById('password').value;
    var confirmPassword = document.getElementById('confirmPassword').value;

    if (password !== confirmPassword) {
      alert("비밀번호가 일치하지 않습니다.");
      event.preventDefault();  // 폼 제출 막기
    }
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
